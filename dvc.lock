schema: '2.0'
stages:
  data_ingestion:
    cmd: python3 src/data_ingestion.py
    deps:
    - path: src/data_ingestion.py
      hash: md5
      md5: b6aec45376cfc41860261a983e2ed47f
      size: 2344
    params:
      params.yaml:
        data_ingestion.url: 
          https://raw.githubusercontent.com/Himanshu-1703/reddit-sentiment-analysis/refs/heads/main/data/reddit.csv
    outs:
    - path: data/raw/reddit.csv
      hash: md5
      md5: b73bead121d2dbfd7823b1d426695256
      size: 6888931
  data_clean:
    cmd: python3 src/data_cleaning.py
    deps:
    - path: data/raw/reddit.csv
      hash: md5
      md5: b73bead121d2dbfd7823b1d426695256
      size: 6888931
    - path: src/data_cleaning.py
      hash: md5
      md5: 2091775d8a311f89c8ee6e287de6a27b
      size: 3231
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 3bc31e5498a80ef0f872342a767667f6
      size: 1016929
    - path: data/processed/train.csv
      hash: md5
      md5: c91b07a28cd27b480e70fca635e88799
      size: 4066168
  feature_engineering:
    cmd: python3 src/feature_engineering.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: 3bc31e5498a80ef0f872342a767667f6
      size: 1016929
    - path: data/processed/train.csv
      hash: md5
      md5: c91b07a28cd27b480e70fca635e88799
      size: 4066168
    - path: src/feature_engineering.py
      hash: md5
      md5: cf69d8f9b0570e2273ed76bf0562f0df
      size: 4373
    params:
      params.yaml:
        feature_engineering.max_features: 1000
        feature_engineering.ngram_range:
        - 1
        - 3
    outs:
    - path: data/final/test.csv
      hash: md5
      md5: 094f90b41e5a6c7d96d1a479df87bd06
      size: 30091202
    - path: data/final/train.csv
      hash: md5
      md5: 3afb8d1519a55073038bf1d48cbff9cc
      size: 120358650
    - path: models/transformer.pkl
      hash: md5
      md5: 18e8c62e834dc48fbadb4ebe68b22871
      size: 36892
  data_preprocessing:
    cmd: python3 src/data_preprocessing.py
    deps:
    - path: data/raw/reddit.csv
      hash: md5
      md5: b73bead121d2dbfd7823b1d426695256
      size: 6888931
    - path: src/data_preprocessing.py
      hash: md5
      md5: 8d034dac103063a0f5045586f3a2fd33
      size: 4541
    params:
      params.yaml:
        data_preprocessing.keep_stop_words:
        - not
        - however
        - although
        - but
        data_preprocessing.random_state: 42
        data_preprocessing.test_size: 0.2
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 3bc31e5498a80ef0f872342a767667f6
      size: 1016929
    - path: data/processed/train.csv
      hash: md5
      md5: c91b07a28cd27b480e70fca635e88799
      size: 4066168
  model_building:
    cmd: python3 src/model_building.py
    deps:
    - path: data/final/test.csv
      hash: md5
      md5: 094f90b41e5a6c7d96d1a479df87bd06
      size: 30091202
    - path: data/final/train.csv
      hash: md5
      md5: 3afb8d1519a55073038bf1d48cbff9cc
      size: 120358650
    - path: src/model_building.py
      hash: md5
      md5: bc042d61c1f4b2b721c31920dd776c53
      size: 3007
    params:
      params.yaml:
        model_building.model_parameters:
          n_estimators: 885
          learning_rate: 0.086
          max_depth: 4
          num_leaves: 99
          colsample_bytree: 0.82
          subsample: 0.924
          reg_alpha: 0.0003
          reg_lambda: 0.493
    outs:
    - path: models/model.pkl
      hash: md5
      md5: a817a774c98654eb385b6995083d2aa0
      size: 2920962
  model_evaluation:
    cmd: python3 src/model_evaluation.py
    deps:
    - path: data/final/test.csv
      hash: md5
      md5: 094f90b41e5a6c7d96d1a479df87bd06
      size: 30091202
    - path: data/final/train.csv
      hash: md5
      md5: 3afb8d1519a55073038bf1d48cbff9cc
      size: 120358650
    - path: models/final_model.pkl
      hash: md5
      md5: 9ea82317acd20e7f222fc53df633c42c
      size: 2921574
    - path: models/tfidf_vectorizer.pkl
      hash: md5
      md5: 2d5cbb71809207ff3230cb8475301d48
      size: 36892
    - path: src/model_evaluation.py
      hash: md5
      md5: 4733ba36388b84796df5d45994438d76
      size: 4794
