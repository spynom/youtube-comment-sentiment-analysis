schema: '2.0'
stages:
  data_ingestion:
    cmd: python3 src/data_ingestion.py
    deps:
    - path: src/data_ingestion.py
      hash: md5
      md5: f418c8855768cdc8802939b990e98f5a
      size: 1460
    params:
      params.yaml:
        data_ingestion.url: 
          https://raw.githubusercontent.com/Himanshu-1703/reddit-sentiment-analysis/refs/heads/main/data/reddit.csv
    outs:
    - path: data/raw/reddit.csv
      hash: md5
      md5: b73bead121d2dbfd7823b1d426695256
      size: 6888931
  data_clean:
    cmd: python3 src/data_cleaning.py
    deps:
    - path: data/raw/reddit.csv
      hash: md5
      md5: b73bead121d2dbfd7823b1d426695256
      size: 6888931
    - path: src/data_cleaning.py
      hash: md5
      md5: 2091775d8a311f89c8ee6e287de6a27b
      size: 3231
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 3bc31e5498a80ef0f872342a767667f6
      size: 1016929
    - path: data/processed/train.csv
      hash: md5
      md5: c91b07a28cd27b480e70fca635e88799
      size: 4066168
  feature_engineering:
    cmd: python3 src/feature_engineering.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: 3bc31e5498a80ef0f872342a767667f6
      size: 1016929
    - path: data/processed/train.csv
      hash: md5
      md5: c91b07a28cd27b480e70fca635e88799
      size: 4066168
    - path: src/feature_engineering.py
      hash: md5
      md5: 19fb060ae7551ad3d0506d4e5ec4c8be
      size: 4378
    params:
      params.yaml:
        feature_engineering.max_features: 1000
        feature_engineering.ngram_range:
        - 1
        - 3
    outs:
    - path: data/final/test.csv
      hash: md5
      md5: 9e4e3edc077a70cf277352f5d02af369
      size: 30091447
    - path: data/final/train.csv
      hash: md5
      md5: 38c15df26a370ebb0f62c3f03faf4757
      size: 120358172
    - path: models/tfidf_vectorizer.pkl
      hash: md5
      md5: 2d5cbb71809207ff3230cb8475301d48
      size: 36892
  data_preprocessing:
    cmd: python3 src/data_preprocessing.py
    deps:
    - path: data/raw/reddit.csv
      hash: md5
      md5: b73bead121d2dbfd7823b1d426695256
      size: 6888931
    - path: src/data_preprocessing.py
      hash: md5
      md5: 26bbf4fb8976cf4cac27c72ff6cb751d
      size: 3316
    params:
      params.yaml:
        data_preprocessing.keep_stop_words:
        - not
        - however
        - although
        - but
        data_preprocessing.random_state: 42
        data_preprocessing.test_size: 0.2
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 3bc31e5498a80ef0f872342a767667f6
      size: 1016929
    - path: data/processed/train.csv
      hash: md5
      md5: c91b07a28cd27b480e70fca635e88799
      size: 4066168
  model_building:
    cmd: python3 src/model_building.py
    deps:
    - path: data/final/test.csv
      hash: md5
      md5: 9e4e3edc077a70cf277352f5d02af369
      size: 30091447
    - path: data/final/train.csv
      hash: md5
      md5: 38c15df26a370ebb0f62c3f03faf4757
      size: 120358172
    - path: src/model_building.py
      hash: md5
      md5: d67547d0294100e24dd4a9ebbe56bd79
      size: 3013
    params:
      params.yaml:
        model_building.model_parameters:
          n_estimators: 885
          learning_rate: 0.086
          max_depth: 4
          num_leaves: 99
          colsample_bytree: 0.82
          subsample: 0.924
          reg_alpha: 0.0003
          reg_lambda: 0.493
    outs:
    - path: models/final_model.pkl
      hash: md5
      md5: 9ea82317acd20e7f222fc53df633c42c
      size: 2921574
  model_evaluation:
    cmd: python3 src/model_evaluation.py
    deps:
    - path: data/final/test.csv
      hash: md5
      md5: 9e4e3edc077a70cf277352f5d02af369
      size: 30091447
    - path: data/final/train.csv
      hash: md5
      md5: 38c15df26a370ebb0f62c3f03faf4757
      size: 120358172
    - path: models/final_model.pkl
      hash: md5
      md5: 9ea82317acd20e7f222fc53df633c42c
      size: 2921574
    - path: models/tfidf_vectorizer.pkl
      hash: md5
      md5: 2d5cbb71809207ff3230cb8475301d48
      size: 36892
    - path: src/model_evaluation.py
      hash: md5
      md5: 33e7cc98f6783484f7ae2fd0e4e7ba9c
      size: 4217
